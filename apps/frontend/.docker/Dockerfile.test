FROM node:22-alpine
WORKDIR /feedstand

ARG VERSION_TAG
ENV VERSION_TAG=${VERSION_TAG}

COPY package*.json .
COPY tsconfig.json .
COPY apps/frontend/package.json apps/frontend/
RUN npm ci -w apps/frontend --ignore-scripts

COPY apps/frontend apps/frontend/
CMD ["npm", "run", "test", "-w", "apps/frontend"]
